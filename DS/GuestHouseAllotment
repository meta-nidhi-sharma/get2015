package Assignment_4;
/**
 * @author Nidhi Sharma
 * Date: 31 august,2015
 * Description : To allot rooms in guest house based on customers age.
 * Allot room number which is the modulus of age of customer by total number of rooms
 */
import java.util.HashMap;
import java.util.Iterator;
import java.util.Scanner;
import java.util.Set;
//Class
public class GuestHouseAllotment 
{
	private static HashMap<String, Integer> guestHouseRoomMap = new HashMap<String, Integer>();		
	//HasMap mapping customers room Number with key as their names and room number as values
	private static int index = 0;				//keeping index of alloted room numbers array
	private static int numberOfRooms;			//total number of rooms in guest house
	private static int array[] = new int[20];	//contains alloted room numbers to compare further
	//Main Function
	@SuppressWarnings("rawtypes")
	public static void main(String args[])
	{
		Scanner sc = new Scanner(System.in);		//Scanner Class reference
		System.out.println("Enter number of rooms in guestHouse");
		int choice;		//to hold user choice of alloting more rooms
		do
		{
			System.out.println("Enter number (prime number) of rooms in guestHouse");
			numberOfRooms = sc.nextInt();
		}
		while(!checkPrimeNumber(numberOfRooms));		//calling check prime function to chect whether the number is prime or not
		do
		{
		System.out.println("Want to book room!\n\nEnter your Name");
		String nameOfCustomer = sc.next();			//holds name of customers
		System.out.println("Enter your age");
		final int age = sc.nextInt();						//holds customers age
		final int roomAlloted = GuestHouseAllotment.roomAllotment(age,numberOfRooms);		
		//calling room allotment process and holding alloted room number
		
		if(roomAlloted >0 && roomAlloted<=numberOfRooms)
		{
			guestHouseRoomMap.put(nameOfCustomer, roomAlloted);
			Set setOfKeys = guestHouseRoomMap.keySet();
			Iterator iterator = setOfKeys.iterator();
			System.out.println("Name Of Customers: | Room Number: ");
			System.out.println("-------------------|--------------- ");
			while (iterator.hasNext())
			{
				String key = (String) iterator.next();
				Integer value = (Integer)guestHouseRoomMap.get(key);
				System.out.println(key+"\t\t\t\t"+value+"\n"); 
			}
		}//mapping rooms with corresponding customers in hashmap
		else
			System.out.println("No rooms available");
		System.out.println("Do you want to book more rooms? If Yes, then press 1 else press anything else");
		choice = sc.nextInt();
		if(choice != 1)
			break;
		}while(choice == 1);
		sc.close();
	}
	
	/*********************************************
	 * To check whether the number is prime number 
	 * or not
	 * @param number
	 * @return boolean true ar false
	 *********************************************/
	public static boolean checkPrimeNumber(int number)
	{
		for(int count = 2 ; count < number/2 ; count++)
		{
			if(number%count == 0)
				return false;
		}
		return true;
	}
	
	/*******************************************************
	 * Alloting room to customers
	 * @param age
	 * @param totalRooms
	 * @return room number
	 ******************************************************/
	public static int roomAllotment(int age, int totalRooms)
	{
		int roomNumber;
		int flag=-1;
		roomNumber = age%totalRooms;
		if(roomNumber==0)
			roomNumber++;
		while(roomNumber <= totalRooms)
		{
			if(index > 0)
			{
				for(int count=0; count<=index; count++)
				{
					if(roomNumber == array[count])
					{
						flag=1;
						roomNumber++;
						count=0;
					}
					else 
						flag = 0;
				}
				if(flag ==0)
					break;
			}
			else
			{
				array[index] = roomNumber;
				index++;
				return roomNumber;
			}
			
		}
		if(flag==0)
		{
			array[index] = roomNumber;
			index++;
			return roomNumber;
		}
		else
		{
			System.out.println("No rooms Available");
			return 0;
		}
	}

}
